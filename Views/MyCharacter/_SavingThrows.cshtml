@model CharacterSheetDnD.ViewModels.MyCharacterViewModel

@using CharacterSheetDnD.Utilities

<!-- Create the Modifier for each Statisti using the CalculateModifier method of the AbilityScoreUtility class in Utilities-->
@{
	var strengthModifier = CharacterSheetDnD.Utilities.AbilityScoreUtility.CalculateModifier(Model.Strength);
}

@{
	var dexterityModifier = CharacterSheetDnD.Utilities.AbilityScoreUtility.CalculateModifier(Model.Dexterity);
}

@{
	var constitutionModifier = CharacterSheetDnD.Utilities.AbilityScoreUtility.CalculateModifier(Model.Constitution);
}

@{
	var intelligenceModifier = CharacterSheetDnD.Utilities.AbilityScoreUtility.CalculateModifier(Model.Intelligence);
}

@{
	var wisdomModifier = CharacterSheetDnD.Utilities.AbilityScoreUtility.CalculateModifier(Model.Wisdom);
}

@{
	var charismaModifier = CharacterSheetDnD.Utilities.AbilityScoreUtility.CalculateModifier(Model.Wisdom);
}



<h2 class="accordion-header" id="panelsStayOpen-heading2">
	<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapse2" aria-expanded="false" aria-controls="panelsStayOpen-collapse2">
		SAVING THROWS
	</button>
</h2>
<div id="panelsStayOpen-collapse2" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-heading2">
	<div class="accordion-body">
		<div class="row">
			<!-- Strength Display -->
			<div class="col-md-4 text-center">
				<p class="text-uppercase mb-1">Strength</p>
				<button class="btn btn-secondary fs-3 fw-bold mb-3 ms-2" data-bs-toggle="modal" data-bs-target="#StrengthProficiencyModal">
					@strengthModifier.ToString("+#;-#;+0")
				</button>
				<!-- Modal for Proficiency -->
				<div class="modal fade" id="StrengthProficiencyModal" tabindex="-1" aria-labelledby="StrengthProficiencyModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="StrengthProficiencyModalLabel">Edit Strength Proficiency</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							</div>
							<form asp-controller="SavingThrow" asp-action="UpdateProficiencyStrength" asp-route-id="@Model.CharacterID" method="post">
								@Html.AntiForgeryToken()
								<div class="modal-body">
									<div class="form-check">
										<input class="form-check-input" type="checkbox" name="IsProficient" id="StrengthSavingThrowProficiencyCheckbox" @(Model.SavingThrows.FirstOrDefault(st => st.Name == "Strength")?.IsProficient == true ? "checked" : "")>
										<label class="form-check-label" for="StrengthSavingThrowProficiencyCheckbox">
											Proficient in Strength Saving Throw
										</label>
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
									<button type="submit" class="btn btn-primary">Update Proficiency</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>


			<!-- Dexterity Display -->
			<div class="col-md-4 text-center">
				<p class="text-uppercase mb-1">Dexterity</p>
				<button class="btn btn-secondary fs-3 fw-bold mb-3 ms-2" data-bs-toggle="modal" data-bs-target="#DexterityProficiencyModal">
					@dexterityModifier.ToString("+#;-#;+0")
				</button>
				<!-- Modal for Proficiency -->
				<div class="modal fade" id="DexterityProficiencyModal" tabindex="-1" aria-labelledby="DexterityProficiencyModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="DexterityProficiencyModalLabel">Edit Dexterity Proficiency</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							</div>
							<form asp-controller="SavingThrow" asp-action="UpdateProficiencyDexterity" asp-route-id="@Model.CharacterID" method="post">
								@Html.AntiForgeryToken()
								<div class="modal-body">
									<div class="form-check">
										<input class="form-check-input" type="checkbox" name="IsProficient" id="DexteritySavingThrowProficiencyCheckbox" @(Model.SavingThrows.FirstOrDefault(st => st.Name == "Dexterity")?.IsProficient == true ? "checked" : "")>
										<label class="form-check-label" for="DexteritySavingThrowProficiencyCheckbox">
											Proficient in Dexterity Saving Throw
										</label>
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
									<button type="submit" class="btn btn-primary">Update Proficiency</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>



			<!-- Constitution Display -->
			<div class="col-md-4 text-center">
				<p class="text-uppercase mb-1">Constitution</p>
				<button class="btn btn-secondary fs-3 fw-bold mb-3 ms-2" data-bs-toggle="modal" data-bs-target="#ConstitutionProficiencyModal">
					@constitutionModifier.ToString("+#;-#;+0")
				</button>
				<!-- Modal for Proficiency -->
				<div class="modal fade" id="ConstitutionProficiencyModal" tabindex="-1" aria-labelledby="ConstitutionProficiencyModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="ConstitutionProficiencyModalLabel">Edit Constitution Proficiency</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							</div>
							<form asp-controller="SavingThrow" asp-action="UpdateProficiencyConstitution" asp-route-id="@Model.CharacterID" method="post">
								@Html.AntiForgeryToken()
								<div class="modal-body">
									<div class="form-check">
										<input class="form-check-input" type="checkbox" name="IsProficient" id="ConstitutionSavingThrowProficiencyCheckbox" @(Model.SavingThrows.FirstOrDefault(st => st.Name == "Constitution")?.IsProficient == true ? "checked" : "")>
										<label class="form-check-label" for="ConstitutionSavingThrowProficiencyCheckbox">
											Proficient in Constitution Saving Throw
										</label>
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
									<button type="submit" class="btn btn-primary">Update Proficiency</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>



			<!-- Intelligence Display -->
			<div class="col-md-4 text-center">
				<p class="text-uppercase mb-1">Intelligence</p>
				<button class="btn btn-secondary fs-3 fw-bold mb-3 ms-2" data-bs-toggle="modal" data-bs-target="#IntelligenceProficiencyModal">
					@intelligenceModifier.ToString("+#;-#;+0")
				</button>
				<!-- Modal for Proficiency -->
				<div class="modal fade" id="IntelligenceProficiencyModal" tabindex="-1" aria-labelledby="IntelligenceProficiencyModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="IntelligenceProficiencyModalLabel">Edit Intelligence Proficiency</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							</div>
							<form asp-controller="SavingThrow" asp-action="UpdateProficiencyIntelligence" asp-route-id="@Model.CharacterID" method="post">
								@Html.AntiForgeryToken()
								<div class="modal-body">
									<div class="form-check">
										<input class="form-check-input" type="checkbox" name="IsProficient" id="IntelligenceSavingThrowProficiencyCheckbox" @(Model.SavingThrows.FirstOrDefault(st => st.Name == "Intelligence")?.IsProficient == true ? "checked" : "")>
										<label class="form-check-label" for="IntelligenceSavingThrowProficiencyCheckbox">
											Proficient in Intelligence Saving Throw
										</label>
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
									<button type="submit" class="btn btn-primary">Update Proficiency</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>



			<!-- Wisdom Display -->
			<div class="col-md-4 text-center">
				<p class="text-uppercase mb-1">Wisdom</p>
				<button class="btn btn-secondary fs-3 fw-bold mb-3 ms-2" data-bs-toggle="modal" data-bs-target="#WisdomProficiencyModal">
					@wisdomModifier.ToString("+#;-#;+0")
				</button>
				<!-- Modal for Proficiency -->
				<div class="modal fade" id="WisdomProficiencyModal" tabindex="-1" aria-labelledby="WisdomProficiencyModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="WisdomProficiencyModalLabel">Edit Wisdom Proficiency</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							</div>
							<form asp-controller="SavingThrow" asp-action="UpdateProficiencyWisdom" asp-route-id="@Model.CharacterID" method="post">
								@Html.AntiForgeryToken()
								<div class="modal-body">
									<div class="form-check">
										<input class="form-check-input" type="checkbox" name="IsProficient" id="WisdomSavingThrowProficiencyCheckbox" @(Model.SavingThrows.FirstOrDefault(st => st.Name == "Wisdom")?.IsProficient == true ? "checked" : "")>
										<label class="form-check-label" for="WisdomSavingThrowProficiencyCheckbox">
											Proficient in Wisdom Saving Throw
										</label>
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
									<button type="submit" class="btn btn-primary">Update Proficiency</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>


			<!-- Charisma Display -->
			<div class="col-md-4 text-center">
				<p class="text-uppercase mb-1">Charisma</p>
				<button class="btn btn-secondary fs-3 fw-bold mb-3 ms-2" data-bs-toggle="modal" data-bs-target="#CharismaProficiencyModal">
					@charismaModifier.ToString("+#;-#;+0")
				</button>
				<!-- Modal for Proficiency -->
				<div class="modal fade" id="CharismaProficiencyModal" tabindex="-1" aria-labelledby="CharismaProficiencyModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="CharismaProficiencyModalLabel">Edit Charisma Proficiency</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							</div>
							<form asp-controller="SavingThrow" asp-action="UpdateProficiencyCharisma" asp-route-id="@Model.CharacterID" method="post">
								@Html.AntiForgeryToken()
								<div class="modal-body">
									<div class="form-check">
										<input class="form-check-input" type="checkbox" name="IsProficient" id="CharismaSavingThrowProficiencyCheckbox" @(Model.SavingThrows.FirstOrDefault(st => st.Name == "Charisma")?.IsProficient == true ? "checked" : "")>
										<label class="form-check-label" for="CharismaSavingThrowProficiencyCheckbox">
											Proficient in Charisma Saving Throw
										</label>
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
									<button type="submit" class="btn btn-primary">Update Proficiency</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>



		</div>
	</div>
</div>